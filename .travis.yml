language: scala

scala:
    - 2.11.7
jdk:
    - oraclejdk8
env:
    global:
        - secure: pwACikxIuhTzrfFbkKuhaEtpcBmo/TM7nI4aURNYPRmMP48sFbufXPd6ncBDI4CtfRtw5w5aesZGtZAlQc47rCMfNH/CgLrLudx6ZlWwql4EYJHSBu3wkU8ypNnUYNHKNHt31E6qupcy6yI4eOSoAnJy+loa+cHaO3pzGgLniMq2K3LNJ0n62JHS1QW9lJ/ZCCILA2RLucaMl8fzu1PQW1YOfSfJgEGqmgcAlDkIzntDkYW6DTQnRA85Pi23axyeLiDHEQzhRiHzYFfHidMlkpOhZCSetR3j2QJKIObciDgDPHDKiGfEi/Qsjuwm8PlhsJs36o/b30jgpujXtniJ2+0/jxZb/DjwodoE1ylxB51pQR/vixtGSjcu086JloD/T7XRHw8nQloG5/5ytSZG73S0AK/9m/w22PeCbRh2wyO7/7oYUK/+UbId5c3/fWLSA1Hxd507Bd4YokhKD2XV5CCBe9NQKrpgkaVYslg1Qbcch5HntqFZhy5m6wbUKP8rvFO1t5x4T8+Mb9D+a/Bug5foVtDKExLatznSOQoPSfGtWdMRezaJU3/YLtRGzwJNF5KIR0IODWy4xMN0jBBNUklxLcTEJlROlEK1/Agp1bzRHNHKw744nmP/rv4iTKF7aXn9eEn1Je/ag/6mSoYuucKsOdAzu1U7zq4ej5yQbSY=
        - secure: SDwr+q0aXBANflxtxnDqckNAy34WYJ7sol9G71G0W2DZ2F2CDGC/27EWPQbj/MHLgNc/GLggq7duQTz3nGxWCLVOvfViL/TTSmahcY/GVorUUPHK74WbROl0siegLFc/pCN7HJuagzh61jj+R+QWQNiE6uD/n2OjqLsJg4li3fL+qqK5PxVmHVr0oM/um0/n7V3zvsQ/Dk13VWqhhxFwtRepClMKv5/pufsUsMzBo7oUIN+Ajyt/6awhqFtHhjWRa3olLbUQrGKA0wItUHHFf5JiFU/j9IzOlCLYq4DIJGCYfV8z8NjVi0iHC+KIixCGxIWhsOilaNaYTA2WIqb7oAbDhFpDuNUX9I3iG0XuzPoyLCAA3wpcX5fQRhsnHBP/kaP/2mIdnfPDqXFcgCzVnswTCGJx9SiGljk1pG0xy9Cnrr5M0jAmdIZL6CjSVtq/GkRKoMoRLqBJdf4ecaiFiV9E6utMpfr4zYjrbXwZo5G6Pd43AYyoskdS6XlBlgwOq1wZ1G+K68JDw7km9yH9/2pvQSZY4BqseDX0//iLZjL1TPnNxLzZcsOGRHsWquM4jewSxdIUr8yDtprrdoNmRxDeZ8mIoxEi9/6Klv5YtnS3Wkomr14AlOU/fvvguOvRKJEqPqugOQHhSLoqvslYyZVUdVSXK9/aWR3n1VOhscQ=
        - secure: qE2XrQdnSi+V1i2mhaWiZVXE9VJaqMSQ/g4xhE2hnQBJgoaRD8mI91c0ZQYGHleSCKqunlFfT0okzpJWoLLpDYU6Wd0+Bw/FZPEh95uVvRTb12Zf7cYCBjZEHPL0NofJUqZXA2aBywbxNf7kRsfcidOjC9tImFvWZ9nkA6BNI80CBDDuUZkU84a34tkBHpicjiBe96JnJfHYR3AugqYblXl3XqyOup93qG/w+/LQhpe2Yg5mJJ49DZAkByqlO6OX+CzUNt84aX3U3XqyX/7EjJiozFVj6NGb008qk7v2Pdm4y//yne7APX8awbEbnigM9Iw3GUOkKT4fCWB9MtOM3jxF3nqDPiTjauh4MgmSsZiqdR2wXVJuPmVieNKzT7IU59PXPmZnCCTaHzfPzG6fcLIJyOOORSj83GHOVUe+jtPkwXZRe1OOmxz09zqcUqAQrpRkTb/KWJSkZQINAxiVfX2ECOX7xauDAACQTMaNmZW72iNj7mVLJ15PNvPKHPu2TazSp3a0Bb8IO9mbe5YkJvWynbMoY9230gItcF2PeEdK02SdT+KAN3m6jH0H+XH6rV0pD5qXea0tHb9NEZMmUZhv+6uW9w19TyFeBi1yLk/Dfd8vnTMrQRZcnDVK4m4ofbdFqrqzLBjd1cfXI+WaIkFVC3hpVxWo/SLI2aPm7CI=
        - secure: N/g6B6aRF1bgxgHFy3MpRrqhqp+EGlzlorGvtHHQm8lP4XAT4sz3Txm03JpjT4ZMhl0vrkicQpLg7WqiiUa9c90d2auYLAMrvCSmL/C3byunZNVFBVTjnGehUCOOapbvj0JZizIqHY6rTtywmO+tSrARA4arBv5ysd/XjMU+wJvgX5zRBJeWVQWr//TA3l7WeuUiUzq+Qa02MIyKa+IaWbr17+ejjk+WlRxNnjXfJiCVKCXoxNgtYgjeuo8tF1q05fJMzmIBfZUTo8BcvdEguNgI6srZwVAvLpNvcaEBBgyit1DtgL+EGCxCj5fuoq5Vewc+gjiV5B14hYRSqYSWTbvsfvcVHr1wtrz5ZNabgmw8ogwjvlcIuYTIzlBTTM+UwbWYtTURtkaO6mWthF+EaZ5NacBYujrn3ApAuLIMr41tdFwr00ex2UXpWfkC56tNUt3urRNgoOU9Alrv8FgbrvU6MHIeOv99yhhM5N8yi/AZRFven6l49fMoqsJBGDVcZ2C3bFNnEJ2TghgQztjlo31AD1IEESAi3P9um/V8rX92nBpAye5qgH4tKYMSYu/NWOxaMWMA495NyfbIo5BdEX7862N/Pb0D/iXvtr+Q9O2t/CPN9pyjrrEVpxKuYDhSZ7Qd0cW1JbfCvBzNuuiJsqjccIkmrGBlv1G8ORKcVP0=

before_install:
 - >
    if [ "x${ENCRYPTION_PASSWORD}" != "x" ]; then
        openssl aes-256-cbc -pass pass:${ENCRYPTION_PASSWORD} -in secring.gpg.enc -out secring.gpg -d
        openssl aes-256-cbc -pass pass:${ENCRYPTION_PASSWORD} -in gpg.sbt.enc -out gpg.sbt -d
    fi

script:
    - sbt -jvm-opts jvmopts clean coverage test
    - sbt coverageReport
    - sbt coverageAggregate
    - sbt codacyCoverage

after_success:
    - >
        sbt 'set credentials += Credentials("Sonatype Nexus Repository Manager", "oss.sonatype.org", System.getenv("SONATYPE_USER"), System.getenv("SONATYPE_PASS"))' publish-signed